@{
    ViewData["Title"] = "Car";
}
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="css/car_buy.css">
    <link rel="icon" type="image/car-icaon" href="img/favicon.png">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
</head>


<body>
    <!--home-->
    <section class="home" id="home" style="display: flex; flex-direction: row; grid-gap: 1rem">
        <div style="width: 25%; display: flex; flex-direction: column; grid-gap: 0.5rem">
            <label for="search">Filtreleme</label>
            <input id="search" placeholder="Arama Yap..." type="text">

            <label for="filter_brand">Marka Seç</label>
            <select id="filter_brand"></select>

            <label for="color">Color</label>
            <select id="color"></select>

            <label for="fuel">Fuel</label>
            <select id="fuel"></select>

            <label for="country">Country</label>
            <select id="country"></select>

            <label for="gear">Gear</label>
            <select id="gear"></select>

            <label for="case_type">Case Type</label>
            <select id="case_type"></select>

            <label>Price</label>
            <form class="ff_v8">
                <span class="fpl_v8">
                    <input type="hidden" id="pfbu1" value="">
                    <div id="pfb1">Please enter price range</div>
                    <span class="pf_iw">
                        <input id="pf1" placeholder="minimum" type="text" maxlength="10" value>
                        <text>-</text>
                        <input id="pf2" placeholder="maximum" type="text" maxlength="10" value>
                        <button>
                            >
                        </button>
                    </span>
                </span>
            </form>

            <label>Km</label>
            <form class="ff_v8">
                <span class="fpl_v8">
                    <input type="hidden" id="pfbu2" value="">
                    <div id="pfb2">Please enter price range</div>
                    <span class="pf_iw">
                        <input id="pf3" placeholder="minimum" type="text" maxlength="10" value>
                        <text>-</text>
                        <input id="pf4" placeholder="maximum" type="text" maxlength="10" value>
                        <button>
                            >
                        </button>
                    </span>
                </span>
            </form>

            <div class="submit">
                <button class="submit_button" id="btnSearch" type="button">Find Cars</button>
            </div>
            <button class="delete_button" id="btnClear" type="button">Delete</button>

        </div>
        <div style="width: 75%">
            <div style=" overflow-x: auto;">

                <table class="table_name table-striped table-bordered">
                    <thead>
                        <tr>
                            <th>Brand Name</th>
                            <th>Color Name</th>
                            <th>Price</th>
                            <th>Model Year</th>
                            <th>Image</th>
                            <th>Detail</th>

                        </tr>
                    </thead>
                    <tbody id="list_data">
                    </tbody>
                </table>

            </div>
        </div>
    </section>

    <!--footer-->
    <footer class="copyright">
        <div class="up" id="up">
            <p>&copy car rental</p>
        </div>
    </footer>

    <script src="js/main.js"></script>

    <script>
        $(document).ready(function () {

            loadCarList();

        });


        const filter_brand_select = document.getElementById('filter_brand')
        filter_brand_select.innerHTML = ['marka1', 'marka2', 'marka3'].map(item => '<option>' + item + '</option>')


        function loadCarList() {
            var tbody = $("#list_data");
            tbody.empty();

            $.ajax({
                url: "@Url.Action("GetCarDetails","CarBuy")",
                method: "POST",
                dataType: "json",
                success: function (response) {
                    $.each(response, function (index, item) {

                        //var hexData = item.carImage;

                        //var base64Data = hexToBase64(hexData);

                        //var imageUrl = 'data:image/jpeg;base64,' + base64Data;


                        var row = `
                                        <tr>
                                            <td>${item.brandName}</td>
                                            <td>${item.colorName}</td>
                                            <td>${item.price}</td>
                                            <td>${item.modelYear}</td>
                                            <td>${item.carImage}</td>
                                            <td>
                                                <button class="detailCar_Btn btn btn-primary" data-product-id="${item.id}">Detail</button>
                                            </td>
                                        </tr>`;
                        tbody.append(row);
                    });
                },
                error: function (error) {
                    console.error("Error loading car list:", error);
                }
            });
        }

    </script>

</body>
</html>
